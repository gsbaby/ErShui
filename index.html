<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link rel="stylesheet" href="./leaflet/leaflet.css"/>
    <link rel="stylesheet" href="./leaflet/src/Leaflet.NavBar.css"/>
    <link rel="stylesheet" href="./leaflet/Control.MiniMap.min.css"/>
    <link rel="stylesheet" href="./leaflet/Control.FullScreen.css"/>

    <script src="./leaflet/leaflet.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.js"></script>
    <script src="./leaflet/leaflet-ant-path.js" type="text/javascript"></script>
    <script src="./leaflet/src/Leaflet.NavBar.js" type="text/javascript"></script>
    <script src="./leaflet/Control.MiniMap.min.js" type="text/javascript"></script>
    <script src="./leaflet/Control.FullScreen.js" type="text/javascript"></script>

</head>
<body style="height: 100vh;margin: 0;">
<div id='map' style="width:100%;height:100%"></div>
<script>
    <!--  地图基础配置  -->
    let myMap = L.map('map', {
        center: [31.246511936187744, 118.15956830978394],
        maxZoom: 24,
        zoom: 16,   //缩放比列
        crs: L.CRS.EPSG4326,
        zoomControl: true, //禁用 + - 按钮
        doubleClickZoom: false,  // 禁用双击放大
        attribution: '',
        attributionControl: false,  // 移除右下角leaflet标识sxx
        fullscreenControl: true,
        fullscreenControlOptions: {
            position: 'topleft'
        }
    })
    // 导航栏
    const navBar = L.control.navbar({
        position: 'topleft'
    })
    myMap.addControl(navBar)
    // 比例尺
    L.control.scale({
        maxWidth: 200,
        metric: true
    }).addTo(myMap)


    myMap.on('click', (e) => {
        console.log(e)
    });

    function addSST() {	//加载天地图
        let tiandituLayer = L.tileLayer(
            "http://t0.tianditu.gov.cn/vec_c/wmts?layer=vec&style=default&tilematrixset=c&Service=WMTS&Request=GetTile&Version=1.0.0&Format=tiles&TileMatrix={z}&TileCol={x}&TileRow={y}&tk=fae2cd87e1fa8bb1b068714d764a78a9", {
                maxZoom: 20,
                tileSize: 256,
                zoomOffset: 1,
                minZoom: 3
            })
        let tiandituMark = L.tileLayer(
            "http://t1.tianditu.com/cva_c/wmts?layer=cva&style=default&tilematrixset=c&Service=WMTS&Request=GetTile&Version=1.0.0&Format=tiles&TileMatrix={z}&TileCol={x}&TileRow={y}&tk=fae2cd87e1fa8bb1b068714d764a78a9", {
                maxZoom: 20,
                tileSize: 256,
                zoomOffset: 1,
                zIndex: 5,
                minZoom: 3
            })
        myMap.addLayer(tiandituLayer);
        myMap.addLayer(tiandituMark);

        //添加鹰眼
        let normalm = L.tileLayer(
            "http://t0.tianditu.gov.cn/img_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=fae2cd87e1fa8bb1b068714d764a78a9", {
                maxZoom: 20,
                tileSize: 256,
                zoomOffset: 1,
                zIndex: 5,
                minZoom: 3
            })
        const miniMap = new L.Control.MiniMap(normalm, {
            position: 'bottomright',
            toggleDisplay: true,
            autoToggleDisplay: true
        }).addTo(myMap)
    }

    addSST()

    data_polyline = [
        [31.241962909698486, 118.16064119338989], [31.244537830352783, 118.15800189971924], [31.24558925628662, 118.15686464309692],
        [31.245224475860596, 118.15579175949097], [31.2461256980896, 118.15489053726196], [31.2481427192688, 118.1580662727356]
    ]
    const path = L.polyline.antPath(data_polyline, {
        "delay": 800,
        "dashArray": [
            10,
            20
        ],
        "weight": 5,
        "color": "#0000FF",
        "pulseColor": "#FFFFFF",
        "paused": false,
        "reverse": false,
        "hardwareAccelerated": true
    });

    myMap.addLayer(path);
    myMap.fitBounds(path.getBounds())

</script>

</body>
</html>